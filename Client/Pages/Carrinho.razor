@page "/carrinho"

@using Client.Services
@using global::Shared.Models

@inject CarrinhoService CarrinhoService
@inject HttpClient httpClient


<h2>Carrinho de Compras</h2>


<div class="p-3">


	<table class="table text-center">
		<tr>
			<td class="border-1">Nome do Produto</td>
			<td class="border-1">Preço</td>
			<td class="border-1">Ações</td>
		</tr>

		@foreach (var item in CarrinhoService.ObterProdutos())
		{
			<tr>
				<td class="border-1">@item.Nome</td>
				<td class="border-1">@item.Preco.ToString("C")</td>
				<button class="btn btn-danger" @onclick="() => RemoverProduto(item)">Remover</button>
			</tr>
			
		}
	</table>
</div>

<div class="d-flex d-xl-inline-flex">
	<p class="p-2"><strong>Total:</strong> @CarrinhoService.ObterTotal().ToString("C")</p>
    <button class="btn btn-primary" style="width:auto; height:30px; padding:3px 2px;" @onclick="FinalizarCompra">Finalizar Compra</button>

</div>


@code {
	private List<Produto>? produtos = new();
	
	private void RemoverProduto(Produto produto)
	{
		CarrinhoService.RemoverProduto(produto);
	}
	private void FinalizarCompra()
	{
		// Lógica para finalizar a compra
		// Você pode enviar os dados do carrinho para o servidor ou processar o pagamento aqui
	}
}
